# PDF 페이지 분할 PRD

## 1. 프로젝트 개요

### 1.1 목적
PDF 파일을 업로드하면 각 페이지를 독립적인 PDF 파일로 분할하여 개별 다운로드할 수 있는 웹 애플리케이션을 제공합니다.

### 1.2 핵심 가치
- **프라이버시 보호**: 모든 처리를 클라이언트 사이드에서 수행하여 서버에 파일이 저장되지 않음
- **간편한 사용**: 드래그앤드롭으로 직관적인 파일 업로드
- **빠른 처리**: 서버 업로드 없이 즉시 처리
- **비용 효율**: 서버 인프라 불필요

## 2. 기술 스택

### 2.1 프론트엔드
- **Framework**: Next.js (App Router)
- **UI Library**: React
- **UI Components**: Shadcn/ui
- **Styling**: Tailwind CSS
- **PDF 처리**: pdf-lib (v1.17.1+)

### 2.2 아키텍처
- **처리 방식**: 클라이언트 사이드 전용 (서버 업로드 불필요)
- **페이지 구조**: 단일 페이지 애플리케이션 (SPA)
- **상태 관리**: React State 또는 Zustand

## 3. 기능 요구사항

### 3.1 파일 업로드
- **드래그앤드롭 지원**
  - 드래그 오버 시 시각적 피드백 제공
  - PDF 파일만 허용 (`.pdf` 확장자)
  - 드롭 영역 명확히 표시
  
- **파일 선택 지원**
  - 클릭하여 파일 선택 가능
  - 파일 입력 컴포넌트 제공

- **파일 검증**
  - PDF 파일 형식 검증
  - 파일 크기 제한 (선택사항, 예: 100MB)
  - 잘못된 파일 형식 시 에러 메시지 표시

### 3.2 PDF 처리
- **페이지 분할**
  - 업로드된 PDF의 모든 페이지를 독립적인 PDF 파일로 분할
  - 각 페이지는 별도의 PDF 문서로 생성
  - 처리 진행 상태 표시 (선택사항)

- **에러 처리**
  - 손상된 PDF 파일 처리
  - 메모리 부족 상황 처리
  - 사용자 친화적인 에러 메시지

### 3.3 다운로드 기능
- **개별 다운로드**
  - 각 페이지별 다운로드 버튼 제공
  - 파일명 형식: `원본파일명_page_01.pdf`, `원본파일명_page_02.pdf` 등
  
- **일괄 다운로드** (선택사항)
  - 모든 페이지를 ZIP 파일로 압축하여 다운로드
  - 또는 모든 페이지를 한 번에 다운로드

### 3.4 UI/UX 요구사항
- **단일 페이지 구조**
  - URL 변경 없이 화면 전환
  - 업로드 화면 → 처리 중 → 다운로드 화면
  
- **반응형 디자인**
  - 모바일, 태블릿, 데스크톱 지원
  - Tailwind CSS를 활용한 반응형 레이아웃

- **시각적 피드백**
  - 로딩 상태 표시
  - 성공/에러 상태 표시
  - 진행률 표시 (선택사항)

## 4. 화면 구성

### 4.1 업로드 화면
- 드래그앤드롭 영역 (큰 영역)
- 또는 파일 선택 버튼
- 안내 텍스트 ("PDF 파일을 드래그하거나 클릭하여 업로드하세요")
- 지원 파일 형식 표시

### 4.2 처리 중 화면
- 로딩 스피너 또는 프로그레스 바
- "PDF를 분할하는 중..." 메시지
- 취소 버튼 (선택사항)

### 4.3 다운로드 화면
- 원본 파일 정보 표시 (파일명, 페이지 수)
- 각 페이지별 다운로드 버튼 리스트
- 페이지 미리보기 (선택사항)
- 새 파일 업로드 버튼

## 5. 기술적 구현 세부사항

### 5.1 파일 읽기
```typescript
// FileReader API 또는 File.arrayBuffer() 사용
const arrayBuffer = await file.arrayBuffer();
```

### 5.2 PDF 분할 로직
```typescript
// pdf-lib를 사용한 페이지 분할
const pdfDoc = await PDFDocument.load(arrayBuffer);
const totalPages = pdfDoc.getPageCount();

for (let i = 0; i < totalPages; i++) {
  const newPdf = await PDFDocument.create();
  const [copiedPage] = await newPdf.copyPages(pdfDoc, [i]);
  newPdf.addPage(copiedPage);
  const pdfBytes = await newPdf.save();
  // Blob으로 변환하여 저장
}
```

### 5.3 다운로드 구현
```typescript
// Blob URL을 사용한 다운로드
const blob = new Blob([pdfBytes], { type: 'application/pdf' });
const url = URL.createObjectURL(blob);
// <a> 태그를 사용하여 다운로드 트리거
```

### 5.4 메모리 관리
- 큰 파일 처리 시 Web Workers 고려
- 처리 완료 후 Blob URL 정리 (`URL.revokeObjectURL()`)
- 메모리 사용량 모니터링

## 6. 성능 요구사항

### 6.1 처리 속도
- 10페이지 이하: 1초 이내
- 50페이지 이하: 5초 이내
- 100페이지 이하: 10초 이내

### 6.2 파일 크기 제한
- 권장 최대 크기: 100MB
- 브라우저 메모리 제한 고려

### 6.3 브라우저 호환성
- Chrome/Edge (최신 2개 버전)
- Firefox (최신 2개 버전)
- Safari (최신 2개 버전)

## 7. 에러 처리

### 7.1 파일 관련 에러
- 잘못된 파일 형식
- 손상된 PDF 파일
- 파일 크기 초과

### 7.2 처리 관련 에러
- 메모리 부족
- 처리 실패
- 타임아웃

### 7.3 사용자 피드백
- 명확한 에러 메시지
- 해결 방법 제시
- 재시도 옵션 제공

## 8. 향후 개선 사항 (선택사항)

### 8.1 기능 확장
- 특정 페이지 범위 선택 분할
- 페이지 순서 변경
- 여러 PDF 파일 동시 처리
- PDF 병합 기능

### 8.2 성능 최적화
- Web Workers를 활용한 백그라운드 처리
- 청크 단위 처리로 메모리 사용량 최적화
- 진행률 표시 개선

### 8.3 사용자 경험 개선
- 페이지 미리보기
- 다크 모드 지원
- 다국어 지원
- 접근성 개선 (ARIA 라벨 등)

## 9. 개발 단계

### Phase 1: 기본 기능
- [ ] Next.js 프로젝트 설정
- [ ] Shadcn/ui 컴포넌트 설정
- [ ] 드래그앤드롭 업로드 구현
- [ ] PDF 분할 로직 구현
- [ ] 기본 다운로드 기능

### Phase 2: UI/UX 개선
- [ ] 화면 전환 애니메이션
- [ ] 로딩 상태 표시
- [ ] 에러 처리 및 메시지
- [ ] 반응형 디자인

### Phase 3: 최적화
- [ ] 성능 최적화
- [ ] 메모리 관리 개선
- [ ] 브라우저 호환성 테스트
- [ ] 사용자 테스트 및 피드백 반영

## 10. 성공 지표

- 파일 업로드 성공률: 95% 이상
- 처리 성공률: 98% 이상
- 사용자 만족도: 4.0/5.0 이상
- 평균 처리 시간: 10페이지 기준 3초 이내

